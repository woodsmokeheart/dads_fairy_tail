# 📱 Экраны приложения

## Обзор экранов

Приложение состоит из следующих основных экранов:

```
┌─────────────────────────────────────┐
│          Главная страница           │
│      (Популярные сказки + CTA)      │
└─────────────────────────────────────┘
           ↓           ↓
    ┌──────────┐  ┌──────────┐
    │  Сказка  │  │ Библиотека│
    └──────────┘  └──────────┘
           ↓           
    ┌──────────┐  ┌──────────┐
    │ Профиль  │  │  О нас   │
    └──────────┘  └──────────┘
```

---

## 🏠 Главная страница

**Маршрут**: `/`  
**Файл**: `src/app/page.tsx`

### Назначение

Первая страница, которую видит пользователь. Демонстрирует основные возможности приложения и популярные сказки.

### Структура экрана

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│                                         │
│        Hero Section                     │
│   Волшебные сказки для ваших           │
│   маленьких принцев и принцесс         │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│   Популярные сказки                    │
│   ┌─────┐ ┌─────┐ ┌─────┐             │
│   │ 🎭  │ │ 🎭  │ │ 🎭  │             │
│   └─────┘ └─────┘ └─────┘             │
│   ┌─────┐ ┌─────┐ ┌─────┐             │
│   │ 🎭  │ │ 🎭  │ │ 🎭  │             │
│   └─────┘ └─────┘ └─────┘             │
│                                         │
│        [Пагинация]                      │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│    CTA: Хотите стать автором?          │
│         [Стать автором]                 │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Секции

#### 1. **Hero Section**
- **Заголовок**: "Волшебные сказки для ваших маленьких принцев и принцесс"
- **Описание**: Краткое описание проекта
- **Фоновый элемент**: Большая иконка книги
- **Цель**: Привлечь внимание, объяснить ценность

#### 2. **Популярные сказки**
- **Заголовок**: "Популярные сказки"
- **Подзаголовок**: "Самые любимые истории наших читателей"
- **Сетка**: 3 колонки на desktop, 2 на tablet, 1 на mobile
- **Лимит**: 6 сказок на страницу
- **Компоненты**: StoryCard для каждой сказки
- **Функционал**:
  - Клик на карточку → переход на страницу сказки
  - Кнопка удаления (только для модераторов)

#### 3. **Пагинация**
- Отображается, если сказок больше 6
- Кнопки "Предыдущая" / "Следующая"
- Индикатор текущей страницы

#### 4. **CTA (Call To Action)**
- **Заголовок**: "Хотите стать автором?"
- **Описание**: Приглашение создавать сказки
- **Кнопка**: "Стать автором"
- **Действие**: Показ toast с информацией о связи с администратором

#### 5. **Empty State** (если нет сказок)
- Иконка книги
- Текст: "Пока нет сказок"
- Кнопка: "Стать автором"

### Особенности для ролей

| Элемент | Неавторизованный | Авторизованный | Модератор |
|---------|------------------|----------------|-----------|
| Hero | ✅ Видит | ✅ Видит | ✅ Видит |
| Список сказок | ✅ Видит | ✅ Видит | ✅ Видит |
| Кнопка удаления | ❌ Нет | ❌ Нет | ✅ Видит на всех сказках |
| CTA | ✅ Видит | ✅ Видит | ✅ Видит |

### Загрузка данных

- **Тип**: Server Side Rendering (SSR) + Client-side state
- **Источник**: `StoriesService.getStoriesPaginated()`
- **Фильтры**: `{ is_published: true }`
- **Пагинация**: 6 сказок на страницу
- **Кеширование**: через ExecutionQueue (TTL: 1 минута)

---

## 📚 Библиотека сказок

**Маршрут**: `/stories`  
**Файл**: `src/app/stories/page.tsx`

### Назначение

Полный список всех опубликованных сказок с пагинацией.

### Структура экрана

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│                                         │
│   📚 Библиотека сказок                 │
│   Все опубликованные сказки в нашей    │
│   коллекции                             │
│   Всего сказок: 24                     │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│   ┌─────┐ ┌─────┐ ┌─────┐             │
│   │ 🎭  │ │ 🎭  │ │ 🎭  │             │
│   └─────┘ └─────┘ └─────┘             │
│   ┌─────┐ ┌─────┐ ┌─────┐             │
│   │ 🎭  │ │ 🎭  │ │ 🎭  │             │
│   └─────┘ └─────┘ └─────┘             │
│                                         │
│     [← Предыдущая] Страница 2 из 4     │
│                    [Следующая →]        │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Секции

#### 1. **Заголовок**
- Иконка библиотеки
- Заголовок: "Библиотека сказок"
- Описание: "Все опубликованные сказки..."
- Счетчик: общее количество сказок

#### 2. **Список сказок**
- Сетка карточек (аналогично главной)
- 6 сказок на страницу
- Сортировка: по дате создания (новые сверху)

#### 3. **Пагинация**
- Server-side пагинация
- URL параметр: `?page=2`
- Link компоненты для SEO

#### 4. **Empty State**
- Если библиотека пуста
- Кнопка "Вернуться на главную"

### SEO

```typescript
export const metadata: Metadata = {
  title: 'Библиотека сказок - Папины сказки',
  description: 'Все опубликованные сказки...',
  keywords: 'библиотека сказок, все сказки, детские истории',
  canonical: 'https://dads-fairy-tales.vercel.app/stories'
};
```

### Особенности

- **Server Component**: для лучшего SEO
- **Static Generation**: с revalidation
- **URL навигация**: история браузера сохраняется

---

## 📖 Страница сказки

**Маршрут**: `/story/[id]`  
**Файл**: `src/app/story/[id]/page.tsx`

### Назначение

Отображение полного текста сказки с возможностью читать её.

### Структура экрана

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│  [← Назад]                              │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │                                   │ │
│  │      Обложка сказки              │ │
│  │                                   │ │
│  └───────────────────────────────────┘ │
│                                         │
│  Название сказки                        │
│  👤 Автор  |  📖 15 мин  |  📅 1 окт   │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  Полный текст сказки с форматированием │
│  (из Rich Text Editor)                  │
│                                         │
│  Жил-был в далеком лесу...            │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  [❤️ Добавить в избранное]             │
│  (планируется)                          │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Секции

#### 1. **Навигация**
- Кнопка "Назад" (возврат к предыдущей странице)

#### 2. **Обложка**
- Большое изображение обложки
- Или заглушка, если обложки нет

#### 3. **Метаинформация**
- Название сказки (H1)
- Автор с аватаром (кликабельно → профиль)
- Время чтения
- Дата публикации

#### 4. **Содержание сказки**
- Полный текст из Rich Text Editor
- HTML рендеринг с сохранением форматирования:
  - Заголовки
  - Жирный/курсив текст
  - Списки
  - Цитаты
  - Изображения

#### 5. **Действия** (планируется)
- Кнопка "Добавить в избранное"
- Кнопка "Поделиться"
- Оценка сказки

### Ограничения доступа

#### Неавторизованный пользователь:
```
┌─────────────────────────────────────┐
│ Первые 2-3 абзаца текста...        │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │  Зарегистрируйтесь, чтобы       │ │
│ │  прочитать сказку полностью     │ │
│ │                                 │ │
│ │      [Войти / Регистрация]      │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### Авторизованный пользователь:
- Полный доступ к тексту сказки

### SEO

- Dynamic metadata на основе сказки
- Open Graph tags для социальных сетей
- Structured data (schema.org/Article)

---

## 👤 Профиль пользователя

**Маршрут**: `/profile`  
**Файл**: `src/app/profile/page.tsx`

### Назначение

Личный кабинет пользователя с информацией о нем и его сказках (для модераторов).

### Структура для обычного пользователя

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│                                         │
│  ┌───┐  Имя пользователя               │
│  │👤 │  user@email.com                  │
│  └───┘                                  │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  (Скоро здесь будут избранные сказки)  │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Структура для модератора

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│                                         │
│  ┌───┐  Имя модератора                 │
│  │👤 │  moderator@email.com             │
│  └───┘  ⭐ Модератор                    │
│                                         │
│  📚 Сказок создано: 15                 │
│         [+ Создать сказку]              │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  Мои сказки                            │
│  ┌─────┐ ┌─────┐ ┌─────┐              │
│  │ 🎭  │ │ 🎭  │ │ 🎭  │              │
│  │ [X] │ │ [X] │ │ [X] │              │
│  └─────┘ └─────┘ └─────┘              │
│                                         │
│        [Пагинация]                      │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Секции

#### 1. **Информация о пользователе**
- Аватар (или иконка по умолчанию)
- Имя пользователя
- Email
- Бейдж "Модератор" (для модераторов)

#### 2. **Статистика** (только для модераторов)
- Количество созданных сказок
- Количество опубликованных (планируется)

#### 3. **Кнопка создания** (только для модераторов)
- "Создать сказку"
- Открывает CreateStoryModal

#### 4. **Список "Мои сказки"** (только для модераторов)
- Все сказки автора (опубликованные + черновики)
- Карточки StoryCard с кнопкой удаления
- Индикатор статуса публикации
- Пагинация (6 на страницу)

#### 5. **Избранное** (планируется для всех)
- Список избранных сказок пользователя

### Модальное окно создания сказки

Открывается при клике на "Создать сказку":

```
┌─────────────────────────────────────────┐
│  Создание сказки                    [X] │
├─────────────────────────────────────────┤
│                                         │
│  Название: [___________________]        │
│                                         │
│  Содержание:                            │
│  ┌───────────────────────────────────┐ │
│  │ Rich Text Editor                  │ │
│  │                                   │ │
│  └───────────────────────────────────┘ │
│                                         │
│  Обложка: [Выбрать файл]               │
│  ┌─────┐                               │
│  │     │ preview                        │
│  └─────┘                               │
│                                         │
│  ☑ Опубликовать сразу                  │
│                                         │
│  [Отмена]          [Создать]           │
│                                         │
└─────────────────────────────────────────┘
```

### Защита доступа

- Требует авторизации
- Redirect на главную, если не авторизован
- Loading state при загрузке данных

---

## ℹ️ О нас

**Маршрут**: `/about`  
**Файл**: `src/app/about/page.tsx`

### Назначение

Информация о проекте, команде, целях и контактах.

### Структура экрана

```
┌─────────────────────────────────────────┐
│             Header                      │
├─────────────────────────────────────────┤
│                                         │
│  О проекте "Папины сказки"             │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  🎯 Наша миссия                        │
│  Текст о миссии проекта                │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  ✨ Наши ценности                      │
│  - Качество контента                   │
│  - Моральность                          │
│  - Доступность                          │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  👥 Команда                            │
│  Информация о создателях               │
│                                         │
│  ────────────────────────────────────   │
│                                         │
│  📞 Контакты                           │
│  Способы связи                          │
│                                         │
├─────────────────────────────────────────┤
│             Footer                      │
└─────────────────────────────────────────┘
```

### Секции

1. **Вступление**: краткое описание проекта
2. **Миссия**: зачем существует проект
3. **Ценности**: принципы работы
4. **Как это работает**: пояснение для пользователей
5. **Команда**: информация о создателях
6. **Контакты**: как связаться

---

## 🔐 Модальные окна

### AuthModal

Модальное окно авторизации/регистрации.

**Триггеры**:
- Клик на "Войти" в Header
- Попытка доступа к защищенному контенту

**Содержит**:
- Tabs: Вход / Регистрация
- Форму входа (email + пароль)
- Форму регистрации (email + пароль + имя)

### CreateStoryModal

Модальное окно создания сказки.

**Триггер**:
- Клик на "Создать сказку" в профиле (модераторы)

**Содержит**:
- Поле название
- Rich Text Editor для содержания
- Upload обложки
- Checkbox публикации

---

## 📱 Адаптивность экранов

Все экраны адаптированы под:

### Desktop (1024px+)
- Полная навигация
- 3-колоночная сетка сказок
- Sidebar (планируется)

### Tablet (768px - 1023px)
- 2-колоночная сетка сказок
- Компактная навигация

### Mobile (< 768px)
- 1-колоночная сетка сказок
- Hamburger меню (планируется)
- Стекирование элементов

---

*Документация экранов актуализирована: октябрь 2025*

